import{g as i,f as d,u as S,p as f,s as C}from"./showToast-BHjQCjPZ.js";const q=t=>{const e=t.replace(/[^0-9.]/g,"").trim();return parseFloat(e)},m=()=>{let t=i(),e=0;t.forEach(u=>{e+=u.totalPrice});let r=q(document.querySelector(".productTax").textContent);document.querySelector(".productSubTotal").textContent=d(e);let n=e+r;document.querySelector(".productFinalTotal").textContent=d(n)},P=t=>{let r=i().filter(u=>u.id!==t);localStorage.setItem("cartProductLS",JSON.stringify(r));let n=document.getElementById(`cart${t}`);n&&n.remove(),S(r.length),m()},g=(t,e,r,n)=>{const u=document.querySelector(`#cart${e}`),l=u.querySelector(".productQuantity"),s=u.querySelector(".productPrice");let o=i(),c=o.find(a=>a.id===e);if(c){let a=c.quantity,y=c.totalPrice;t.target.classList.contains("cardIncrement")&&a<r&&a++,t.target.classList.contains("cardDecrement")&&a>1&&a--,c.quantity=a,y=c.totalPrice=n*a,l.textContent=a,s.textContent=d(y),l.classList.add("flash"),setTimeout(()=>l.classList.remove("flash"),300),localStorage.setItem("cartProductLS",JSON.stringify(o)),m()}};let p=i(),x=f.filter(t=>p.some(e=>e.id===t.id));const L=document.querySelector("#productCartContainer"),T=document.querySelector("#productCartTemplate"),h=()=>{x.forEach(t=>{const{category:e,id:r,image:n,name:u,stock:l,price:s}=t;let o=document.importNode(T.content,!0);o.querySelector("#cardValue").setAttribute("id",`cart${r}`),o.querySelector(".category").textContent=e,o.querySelector(".productName").textContent=u,o.querySelector(".productImage").src=n,p.forEach(c=>{c.id===r&&(o.querySelector(".productQuantity").textContent=c.quantity,o.querySelector(".productPrice").textContent=d(c.totalPrice))}),o.querySelector(".stockElement").addEventListener("click",c=>{g(c,r,l,s)}),o.querySelector(".remove-to-cart-button").addEventListener("click",()=>{P(r),C("Remove",r)}),L.appendChild(o)})};h();m();
